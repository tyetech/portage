#!/sbin/runscript
# Copyright 1999-2011 Gentoo Foundation
# Distributed under the terms of the GNU General Public License v2
# $Header: /usr/local/ssd/gentoo-x86/output/net-misc/cvs-repo/gentoo-x86/net-misc/rabbitmq-server/files/Attic/rabbitmq-server.init-r2,v 1.1 2011/04/07 15:23:19 hollow Exp $

depend() {
	need net
	use dns epmd
}

start() {
	ebegin "Starting RabbitMQ..."
	setsid sh -c "/usr/sbin/rabbitmq-server >> /var/log/rabbitmq/startup.log 2>> /var/log/rabbitmq/startup.err" &
	/usr/sbin/rabbitmqctl wait &>/dev/null
	eend $?
}

stop() {
	ebegin "Stopping RabbitMQ..."
	/usr/sbin/rabbitmqctl stop >> /var/log/rabbitmq/shutdown.log 2>> /var/log/rabbitmq/shutdown.err
	eend $?
}
